From 754e39424c08641436b5e681d4084d97c5e8da79 Mon Sep 17 00:00:00 2001
From: "/setup.sh" <support@vision-components.com>
Date: Wed, 10 Nov 2021 07:40:39 +0100
Subject: [PATCH] Added support for imx219

---
 .../tegra194-camera-jakku-rbpcv2-imx219.dtsi  |   80 +-
 .../common/tegra194-camera-rbpcv2-imx219.dtsi | 1761 ++++++++++-------
 2 files changed, 1093 insertions(+), 748 deletions(-)

diff --git a/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-jakku-rbpcv2-imx219.dtsi b/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-jakku-rbpcv2-imx219.dtsi
index 1f38982..d417638 100644
--- a/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-jakku-rbpcv2-imx219.dtsi
+++ b/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-jakku-rbpcv2-imx219.dtsi
@@ -17,41 +17,71 @@
 
 #include "tegra194-camera-rbpcv2-imx219.dtsi"
 
-#define CAM0_PWDN	TEGRA194_MAIN_GPIO(P, 4)
-#define CAM1_PWDN	TEGRA194_MAIN_GPIO(P, 5)
+#define CAM0_PWDN	TEGRA194_MAIN_GPIO(P, 5)
+#define CAM1_PWDN	TEGRA194_MAIN_GPIO(P, 4)
+#define CAM2_PWDN	TEGRA194_MAIN_GPIO(Q, 5)
+#define CAM3_PWDN	TEGRA194_MAIN_GPIO(Q, 6)
+
 #define CAM_I2C_MUX 	TEGRA194_AON_GPIO(CC, 3)
+#define CAM0_IMX219_PWDN TEGRA194_MAIN_GPIO(Y, 3)
+#define CAM1_IMX219_PWDN TEGRA194_MAIN_GPIO(Y, 2)
 
 / {
-	cam_i2cmux{
-		compatible = "i2c-mux-gpio";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		i2c-parent = <&cam_i2c>;
-		mux-gpios = <&tegra_aon_gpio CAM_I2C_MUX GPIO_ACTIVE_HIGH>;
-		i2c@0 {
-			reg = <0>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			rbpcv2_imx219_a@10 {
-				reset-gpios = <&tegra_main_gpio CAM0_PWDN GPIO_ACTIVE_HIGH>;
-			};
+	/delete-node/ cam_i2cmux;
+
+	i2c@3180000 {
+		status="okay";
+		rbpcv2_imx219_a@10 {
+			status = "okay";
+			reset-gpios = <&tegra_main_gpio CAM0_PWDN GPIO_ACTIVE_HIGH>;
+		};
+	};
+
+	i2c@c240000 {
+		status="okay";
+		rbpcv2_imx219_e@10 {
+			status = "okay";
+			reset-gpios = <&tegra_main_gpio CAM1_PWDN GPIO_ACTIVE_HIGH>;
+		};
+	};
+
+	i2c@31e0000 {
+		status="okay";
+		rbpcv2_imx219_c@10 {
+			status = "okay";
+			reset-gpios = <&tegra_main_gpio CAM3_PWDN GPIO_ACTIVE_HIGH>;
 		};
-		i2c@1 {
-			reg = <1>;
-			#address-cells = <1>;
-			#size-cells = <0>;
-			rbpcv2_imx219_c@10 {
-				reset-gpios = <&tegra_main_gpio CAM1_PWDN GPIO_ACTIVE_HIGH>;
+	};
+
+	i2c@c250000 {
+		status="okay";
+		rbpcv2_imx219_d@10 {
+			status = "okay";
+			reset-gpios = <&tegra_main_gpio CAM2_PWDN GPIO_ACTIVE_HIGH>;
+		};
+	};
+
+	pinmux@2430000 {
+		pinmux_default: common {
+			soc_gpio44_pr0 {
+				nvidia,pins = "soc_gpio44_pr0";
+				nvidia,function = "rsvd2";
+				nvidia,pull = <TEGRA_PIN_PULL_UP>;
+				nvidia,tristate = <TEGRA_PIN_DISABLE>;
+				nvidia,enable-input = <TEGRA_PIN_DISABLE>;
+				nvidia,io-high-voltage = <TEGRA_PIN_DISABLE>;
+				nvidia,lpdr = <TEGRA_PIN_DISABLE>;
 			};
 		};
 	};
 
 	gpio@2200000 {
-		camera-control-output-low {
+		camera-trigger-high {
+			status = "okay";
 			gpio-hog;
-			output-low;
-			gpios = <CAM0_PWDN 0 CAM1_PWDN 0>;
-			label = "cam0-pwdn","cam1-pwdn";
+			output-high;
+			gpios = <TEGRA194_MAIN_GPIO(R, 0) 0>;
+			label = "cam-trigger";
 		};
 	};
 };
diff --git a/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-rbpcv2-imx219.dtsi b/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-rbpcv2-imx219.dtsi
index afabf62..b57abaf 100644
--- a/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-rbpcv2-imx219.dtsi
+++ b/hardware/nvidia/platform/t19x/jakku/kernel-dts/common/tegra194-camera-rbpcv2-imx219.dtsi
@@ -19,764 +19,1072 @@
 / {
 	host1x {
 		vi@15c10000  {
-			num-channels = <2>;
+			num-channels = <4>;
+			status="okay";
 			ports {
+				status="okay";
 				#address-cells = <1>;
 				#size-cells = <0>;
 				vi_port0: port@0 {
+					status="okay";
 					reg = <0>;
 					rbpcv2_imx219_vi_in0: endpoint {
+						status="okay";
+						vc-id=<0>;
 						port-index = <0>;
 						bus-width = <2>;
 						remote-endpoint = <&rbpcv2_imx219_csi_out0>;
 					};
 				};
 				vi_port1: port@1 {
+					status="okay";
 					reg = <1>;
 					rbpcv2_imx219_vi_in1: endpoint {
-						port-index = <2>;
+						status="okay";
+						vc-id=<1>;
+						port-index = <4>;
 						bus-width = <2>;
 						remote-endpoint = <&rbpcv2_imx219_csi_out1>;
 					};
 				};
+				vi_port2: port@2 {
+					status="okay";
+					reg = <2>;
+					rbpcv2_imx219_vi_in2: endpoint {
+						status="okay";
+						vc-id=<2>;
+						port-index = <2>;
+						bus-width = <2>;
+						remote-endpoint = <&rbpcv2_imx219_csi_out2>;
+					};
+				};
+				vi_port3: port@3 {
+					status="okay";
+					reg = <3>;
+					rbpcv2_imx219_vi_in3: endpoint {
+						status="okay";
+						vc-id=<3>;
+						port-index = <3>;
+						bus-width = <2>;
+						remote-endpoint = <&rbpcv2_imx219_csi_out3>;
+					};
+				};
 			};
 		};
 
 		nvcsi@15a00000 {
-			num-channels = <2>;
+			status="okay";
+			num-channels = <4>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			csi_chan0: channel@0 {
+				status="okay";
 				reg = <0>;
 				ports {
+					status="okay";
 					#address-cells = <1>;
 					#size-cells = <0>;
 					csi_chan0_port0: port@0 {
+						status="okay";
 						reg = <0>;
 						rbpcv2_imx219_csi_in0: endpoint@0 {
+							status="okay";
 							port-index = <0>;
 							bus-width = <2>;
 							remote-endpoint = <&rbpcv2_imx219_out0>;
 						};
 					};
 					csi_chan0_port1: port@1 {
+						status="okay";
 						reg = <1>;
 						rbpcv2_imx219_csi_out0: endpoint@1 {
+							status="okay";
 							remote-endpoint = <&rbpcv2_imx219_vi_in0>;
 						};
 					};
 				};
 			};
 			csi_chan1: channel@1 {
+				status="okay";
 				reg = <1>;
 				ports {
+					status="okay";
 					#address-cells = <1>;
 					#size-cells = <0>;
 					csi_chan1_port0: port@0 {
+						status="okay";
 						reg = <0>;
 						rbpcv2_imx219_csi_in1: endpoint@2 {
-							port-index = <2>;
+							status="okay";
+							port-index = <4>;
 							bus-width = <2>;
 							remote-endpoint = <&rbpcv2_imx219_out1>;
 						};
 					};
 					csi_chan1_port1: port@1 {
+						status="okay";
 						reg = <1>;
 						rbpcv2_imx219_csi_out1: endpoint@3 {
+							status="okay";
 							remote-endpoint = <&rbpcv2_imx219_vi_in1>;
 						};
 					};
 				};
 			};
-		};
-	};
-
-	cam_i2cmux {
-		i2c_0:i2c@0 {
-			imx219_cam0: rbpcv2_imx219_a@10 {
-				compatible = "nvidia,imx219";
-				/* I2C device address */
-				reg = <0x10>;
-
-				/* V4L2 device node location */
-				devnode = "video0";
-
-				/* Physical dimensions of sensor */
-				physical_w = "3.680";
-				physical_h = "2.760";
-
-				sensor_model = "imx219";
-
-				use_sensor_mode_id = "true";
-
-				/**
-				* ==== Modes ====
-				* A modeX node is required to support v4l2 driver
-				* implementation with NVIDIA camera software stack
-				*
-				* == Signal properties ==
-				*
-				* phy_mode = "";
-				* PHY mode used by the MIPI lanes for this device
-				*
-				* tegra_sinterface = "";
-				* CSI Serial interface connected to tegra
-				* Incase of virtual HW devices, use virtual
-				* For SW emulated devices, use host
-				*
-				* pix_clk_hz = "";
-				* Sensor pixel clock used for calculations like exposure and framerate
-				*
-				* readout_orientation = "0";
-				* Based on camera module orientation.
-				* Only change readout_orientation if you specifically
-				* Program a different readout order for this mode
-				*
-				* == Image format Properties ==
-				*
-				* active_w = "";
-				* Pixel active region width
-				*
-				* active_h = "";
-				* Pixel active region height
-				*
-				* pixel_t = "";
-				* The sensor readout pixel pattern
-				*
-				* line_length = "";
-				* Pixel line length (width) for sensor mode.
-				*
-				* == Source Control Settings ==
-				*
-				* Gain factor used to convert fixed point integer to float
-				* Gain range [min_gain/gain_factor, max_gain/gain_factor]
-				* Gain step [step_gain/gain_factor is the smallest step that can be configured]
-				* Default gain [Default gain to be initialized for the control.
-				*     use min_gain_val as default for optimal results]
-				* Framerate factor used to convert fixed point integer to float
-				* Framerate range [min_framerate/framerate_factor, max_framerate/framerate_factor]
-				* Framerate step [step_framerate/framerate_factor is the smallest step that can be configured]
-				* Default Framerate [Default framerate to be initialized for the control.
-				*     use max_framerate to get required performance]
-				* Exposure factor used to convert fixed point integer to float
-				* For convenience use 1 sec = 1000000us as conversion factor
-				* Exposure range [min_exp_time/exposure_factor, max_exp_time/exposure_factor]
-				* Exposure step [step_exp_time/exposure_factor is the smallest step that can be configured]
-				* Default Exposure Time [Default exposure to be initialized for the control.
-				*     Set default exposure based on the default_framerate for optimal exposure settings]
-				*
-				* gain_factor = ""; (integer factor used for floating to fixed point conversion)
-				* min_gain_val = ""; (ceil to integer)
-				* max_gain_val = ""; (ceil to integer)
-				* step_gain_val = ""; (ceil to integer)
-				* default_gain = ""; (ceil to integer)
-				* Gain limits for mode
-				*
-				* exposure_factor = ""; (integer factor used for floating to fixed point conversion)
-				* min_exp_time = ""; (ceil to integer)
-				* max_exp_time = ""; (ceil to integer)
-				* step_exp_time = ""; (ceil to integer)
-				* default_exp_time = ""; (ceil to integer)
-				* Exposure Time limits for mode (sec)
-				*
-				* framerate_factor = ""; (integer factor used for floating to fixed point conversion)
-				* min_framerate = ""; (ceil to integer)
-				* max_framerate = ""; (ceil to integer)
-				* step_framerate = ""; (ceil to integer)
-				* default_framerate = ""; (ceil to integer)
-				* Framerate limits for mode (fps)
-				*
-				* embedded_metadata_height = "";
-				* Sensor embedded metadata height in units of rows.
-				* If sensor does not support embedded metadata value should be 0.
-				*/
-				mode0 { /* IMX219_MODE_3264x2464_21FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_a";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "3264";
-					active_h = "2464";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "21000000"; /* 21.0 fps */
-					step_framerate = "1";
-					default_framerate = "21000000"; /* 21.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
-				};
-				mode1 { /* IMX219_MODE_3264x1848_28FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_a";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "3264";
-					active_h = "1848";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "28000000"; /* 28.0 fps */
-					step_framerate = "1";
-					default_framerate = "28000000"; /* 28.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
-				};
-				mode2 { /* IMX219_MODE_1920x1080_30FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_a";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "1920";
-					active_h = "1080";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "30000000"; /* 30.0 fps */
-					step_framerate = "1";
-					default_framerate = "30000000"; /* 30.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
-				};
-
-				mode3 { /* IMX219_MODE_1640x1232_30FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_a";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "1640";
-					active_h = "1232";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "30000000"; /* 60.0 fps */
-					step_framerate = "1";
-					default_framerate = "30000000"; /* 60.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
-				};
-
-				mode4 { /* IMX219_MODE_1280x720_60FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_a";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "1280";
-					active_h = "720";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "60000000"; /* 60.0 fps */
-					step_framerate = "1";
-					default_framerate = "60000000"; /* 60.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
+			csi_chan2: channel@2 {
+				status="okay";
+				reg = <2>;
+				ports {
+					status="okay";
+					#address-cells = <1>;
+					#size-cells = <0>;
+					csi_chan2_port0: port@0 {
+						status="okay";
+						reg = <0>;
+						rbpcv2_imx219_csi_in2: endpoint@4 {
+							status="okay";
+							port-index = <2>;
+							bus-width = <1>;
+							remote-endpoint = <&rbpcv2_imx219_out2>;
+						};
+					};
+					csi_chan2_port1: port@1 {
+						status="okay";
+						reg = <1>;
+						rbpcv2_imx219_csi_out2: endpoint@5 {
+							status="okay";
+							remote-endpoint = <&rbpcv2_imx219_vi_in2>;
+						};
+					};
 				};
-				/*
-				*mode5 {  IMX219_MODE_1280x720_120FPS
-					* mclk_khz = "24000";
-					* num_lanes = "2";
-					* tegra_sinterface = "serial_a";
-					* phy_mode = "DPHY";
-					* discontinuous_clk = "yes";
-					* dpcm_enable = "false";
-					* cil_settletime = "0";
-
-					* active_w = "1280";
-					* active_h = "720";
-					* pixel_t = "bayer_rggb";
-					* readout_orientation = "90";
-					* line_length = "3560";
-					* inherent_gain = "1";
-					* mclk_multiplier = "9.33";
-					* pix_clk_hz = "169600000";
-
-					* gain_factor = "16";
-					* framerate_factor = "1000000";
-					* exposure_factor = "1000000";
-					* min_gain_val = "16"; // 1.00x
-					* max_gain_val = "170"; // 10.66x
-					* step_gain_val = "1";
-					* default_gain = "16"; // 1.00x
-					* min_hdr_ratio = "1";
-					* max_hdr_ratio = "1";
-					* min_framerate = "2000000"; // 2.0 fps
-					* max_framerate = "120000000"; // 120.0 fps
-					* step_framerate = "1";
-					* default_framerate = "120000000"; // 120.0 fps
-					* min_exp_time = "13"; // us
-					* max_exp_time = "683709"; // us
-					* step_exp_time = "1";
-					* default_exp_time = "2495"; // us
-
-					* embedded_metadata_height = "2";
-				*};
-				*/
-
+			};
+			csi_chan3: channel@3 {
+				status="okay";
+				reg = <3>;
 				ports {
+					status="okay";
 					#address-cells = <1>;
 					#size-cells = <0>;
-					port@0 {
+					csi_chan3_port0: port@0 {
+						status="okay";
 						reg = <0>;
-						rbpcv2_imx219_out0: endpoint {
-							port-index = <0>;
-							bus-width = <2>;
-							remote-endpoint = <&rbpcv2_imx219_csi_in0>;
+						rbpcv2_imx219_csi_in3: endpoint@6 {
+							status="okay";
+							port-index = <3>;
+							bus-width = <1>;
+							remote-endpoint = <&rbpcv2_imx219_out3>;
+						};
+					};
+					csi_chan3_port1: port@1 {
+						status="okay";
+						reg = <1>;
+						rbpcv2_imx219_csi_out3: endpoint@7 {
+							status="okay";
+							remote-endpoint = <&rbpcv2_imx219_vi_in3>;
 						};
 					};
 				};
 			};
 		};
-		i2c_1: i2c@1 {
-			imx219_cam1: rbpcv2_imx219_c@10 {
-				compatible = "nvidia,imx219";
-				/* I2C device address */
-				reg = <0x10>;
-
-				/* V4L2 device node location */
-				devnode = "video1";
-
-				/* Physical dimensions of sensor */
-				physical_w = "3.680";
-				physical_h = "2.760";
-
-				sensor_model = "imx219";
-
-				use_sensor_mode_id = "true";
-
-				/**
-				* ==== Modes ====
-				* A modeX node is required to support v4l2 driver
-				* implementation with NVIDIA camera software stack
-				*
-				* == Signal properties ==
-				*
-				* phy_mode = "";
-				* PHY mode used by the MIPI lanes for this device
-				*
-				* tegra_sinterface = "";
-				* CSI Serial interface connected to tegra
-				* Incase of virtual HW devices, use virtual
-				* For SW emulated devices, use host
-				*
-				* pix_clk_hz = "";
-				* Sensor pixel clock used for calculations like exposure and framerate
-				*
-				* readout_orientation = "0";
-				* Based on camera module orientation.
-				* Only change readout_orientation if you specifically
-				* Program a different readout order for this mode
-				*
-				* == Image format Properties ==
-				*
-				* active_w = "";
-				* Pixel active region width
-				*
-				* active_h = "";
-				* Pixel active region height
-				*
-				* pixel_t = "";
-				* The sensor readout pixel pattern
-				*
-				* line_length = "";
-				* Pixel line length (width) for sensor mode.
-				*
-				* == Source Control Settings ==
-				*
-				* Gain factor used to convert fixed point integer to float
-				* Gain range [min_gain/gain_factor, max_gain/gain_factor]
-				* Gain step [step_gain/gain_factor is the smallest step that can be configured]
-				* Default gain [Default gain to be initialized for the control.
-				*     use min_gain_val as default for optimal results]
-				* Framerate factor used to convert fixed point integer to float
-				* Framerate range [min_framerate/framerate_factor, max_framerate/framerate_factor]
-				* Framerate step [step_framerate/framerate_factor is the smallest step that can be configured]
-				* Default Framerate [Default framerate to be initialized for the control.
-				*     use max_framerate to get required performance]
-				* Exposure factor used to convert fixed point integer to float
-				* For convenience use 1 sec = 1000000us as conversion factor
-				* Exposure range [min_exp_time/exposure_factor, max_exp_time/exposure_factor]
-				* Exposure step [step_exp_time/exposure_factor is the smallest step that can be configured]
-				* Default Exposure Time [Default exposure to be initialized for the control.
-				*     Set default exposure based on the default_framerate for optimal exposure settings]
-				*
-				* gain_factor = ""; (integer factor used for floating to fixed point conversion)
-				* min_gain_val = ""; (ceil to integer)
-				* max_gain_val = ""; (ceil to integer)
-				* step_gain_val = ""; (ceil to integer)
-				* default_gain = ""; (ceil to integer)
-				* Gain limits for mode
-				*
-				* exposure_factor = ""; (integer factor used for floating to fixed point conversion)
-				* min_exp_time = ""; (ceil to integer)
-				* max_exp_time = ""; (ceil to integer)
-				* step_exp_time = ""; (ceil to integer)
-				* default_exp_time = ""; (ceil to integer)
-				* Exposure Time limits for mode (sec)
-				*
-				* framerate_factor = ""; (integer factor used for floating to fixed point conversion)
-				* min_framerate = ""; (ceil to integer)
-				* max_framerate = ""; (ceil to integer)
-				* step_framerate = ""; (ceil to integer)
-				* default_framerate = ""; (ceil to integer)
-				* Framerate limits for mode (fps)
-				*
-				* embedded_metadata_height = "";
-				* Sensor embedded metadata height in units of rows.
-				* If sensor does not support embedded metadata value should be 0.
-				*/
-				mode0 { /* IMX219_MODE_3264x2464_21FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_c";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "3264";
-					active_h = "2464";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "21000000"; /* 21.0 fps */
-					step_framerate = "1";
-					default_framerate = "21000000"; /* 21.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
-				};
-				mode1 { /* IMX219_MODE_3264x1848_28FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_c";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "3264";
-					active_h = "1848";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "28000000"; /* 28.0 fps */
-					step_framerate = "1";
-					default_framerate = "28000000"; /* 28.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
-				};
-				mode2 { /* IMX219_MODE_1920x1080_30FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_c";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "1920";
-					active_h = "1080";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "30000000"; /* 30.0 fps */
-					step_framerate = "1";
-					default_framerate = "30000000"; /* 30.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
+	};
+
+
+	i2c@3180000 {
+		status="okay";
+		imx219_cam0: rbpcv2_imx219_a@10 {
+			status="okay";
+			compatible = "nvidia,imx219";
+			reg = <0x10>;
+
+			devnode = "video0";
+
+			physical_w = "3.680";
+			physical_h = "2.760";
+
+			sensor_model = "imx219";
+
+			use_sensor_mode_id = "true";
+
+			mode0 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_a";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "2464";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "21000000";
+				step_framerate = "1";
+				default_framerate = "21000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode1 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_a";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "1848";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "28000000";
+				step_framerate = "1";
+				default_framerate = "28000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode2 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_a";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1920";
+				active_h = "1080";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "30000000";
+				step_framerate = "1";
+				default_framerate = "30000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode3 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_a";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "60000000";
+				step_framerate = "1";
+				default_framerate = "60000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode4 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_a";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "169600000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "120000000";
+				step_framerate = "1";
+				default_framerate = "120000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+
+			ports {
+				status="okay";
+				#address-cells = <1>;
+				#size-cells = <0>;
+				port@0 {
+					status="okay";
+					reg = <0>;
+					rbpcv2_imx219_out0: endpoint {
+						status="okay";
+						port-index = <0>;
+						bus-width = <2>;
+						remote-endpoint = <&rbpcv2_imx219_csi_in0>;
+					};
 				};
-				mode3 { /* IMX219_MODE_1640x1232_30FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_c";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "1640";
-					active_h = "1232";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "30000000"; /* 60.0 fps */
-					step_framerate = "1";
-					default_framerate = "30000000"; /* 60.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
+			};
+		};
+	};
+
+	i2c@c240000 {
+		status="okay";
+		imx219_cam1: rbpcv2_imx219_e@10 {
+			status="okay";
+			compatible = "nvidia,imx219";
+			reg = <0x10>;
+
+			devnode = "video1";
+
+			physical_w = "3.680";
+			physical_h = "2.760";
+
+			sensor_model = "imx219";
+
+			use_sensor_mode_id = "true";
+
+			mode0 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_e";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "2464";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "21000000";
+				step_framerate = "1";
+				default_framerate = "21000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode1 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_e";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "1848";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "28000000";
+				step_framerate = "1";
+				default_framerate = "28000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode2 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_e";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1920";
+				active_h = "1080";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "30000000";
+				step_framerate = "1";
+				default_framerate = "30000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode3 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_e";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "60000000";
+				step_framerate = "1";
+				default_framerate = "60000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode4 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_e";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "169600000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "120000000";
+				step_framerate = "1";
+				default_framerate = "120000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+
+			ports {
+				status="okay";
+				#address-cells = <1>;
+				#size-cells = <0>;
+				port@0 {
+					status="okay";
+					reg = <0>;
+					rbpcv2_imx219_out1: endpoint {
+						status = "okay";
+						port-index = <4>;
+						bus-width = <2>;
+						remote-endpoint = <&rbpcv2_imx219_csi_in1>;
+					};
 				};
-				mode4 { /* IMX219_MODE_1280x720_60FPS */
-					mclk_khz = "24000";
-					num_lanes = "2";
-					tegra_sinterface = "serial_c";
-					phy_mode = "DPHY";
-					discontinuous_clk = "yes";
-					dpcm_enable = "false";
-					cil_settletime = "0";
-
-					active_w = "1280";
-					active_h = "720";
-					pixel_t = "bayer_rggb";
-					readout_orientation = "90";
-					line_length = "3448";
-					inherent_gain = "1";
-					mclk_multiplier = "9.33";
-					pix_clk_hz = "182400000";
-
-					gain_factor = "16";
-					framerate_factor = "1000000";
-					exposure_factor = "1000000";
-					min_gain_val = "16"; /* 1.00x */
-					max_gain_val = "170"; /* 10.66x */
-					step_gain_val = "1";
-					default_gain = "16"; /* 1.00x */
-					min_hdr_ratio = "1";
-					max_hdr_ratio = "1";
-					min_framerate = "2000000"; /* 2.0 fps */
-					max_framerate = "60000000"; /* 60.0 fps */
-					step_framerate = "1";
-					default_framerate = "60000000"; /* 60.0 fps */
-					min_exp_time = "13"; /* us */
-					max_exp_time = "683709"; /* us */
-					step_exp_time = "1";
-					default_exp_time = "2495"; /* us */
-
-					embedded_metadata_height = "2";
+			};
+		};
+	};
+
+
+	i2c@31e0000 {
+		status="okay";
+		imx219_cam2: rbpcv2_imx219_c@10 {
+			status="okay";
+			compatible = "nvidia,imx219";
+			reg = <0x10>;
+
+			devnode = "video2";
+
+			physical_w = "3.680";
+			physical_h = "2.760";
+
+			sensor_model = "imx219";
+
+			use_sensor_mode_id = "true";
+
+			mode0 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_c";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "2464";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "21000000";
+				step_framerate = "1";
+				default_framerate = "21000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode1 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_c";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "1848";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "28000000";
+				step_framerate = "1";
+				default_framerate = "28000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode2 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_c";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1920";
+				active_h = "1080";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "30000000";
+				step_framerate = "1";
+				default_framerate = "30000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode3 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_c";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "60000000";
+				step_framerate = "1";
+				default_framerate = "60000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode4 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_c";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "169600000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "120000000";
+				step_framerate = "1";
+				default_framerate = "120000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+
+			ports {
+				status="okay";
+				#address-cells = <1>;
+				#size-cells = <0>;
+				port@0 {
+					status="okay";
+					reg = <0>;
+					rbpcv2_imx219_out2: endpoint {
+						status="okay";
+						port-index = <2>;
+						bus-width = <2>;
+						remote-endpoint = <&rbpcv2_imx219_csi_in2>;
+					};
 				};
-				/*
-				*mode5 { // IMX219_MODE_1280x720_120FPS
-				*	mclk_khz = "24000";
-				*	num_lanes = "2";
-				*	tegra_sinterface = "serial_c";
-				*	phy_mode = "DPHY";
-				*	discontinuous_clk = "yes";
-				*	dpcm_enable = "false";
-				*	cil_settletime = "0";
-
-				*	active_w = "1280";
-				*	active_h = "720";
-				*	pixel_t = "bayer_rggb";
-				*	readout_orientation = "90";
-				*	line_length = "3560";
-				*	inherent_gain = "1";
-				*	mclk_multiplier = "9.33";
-				*	pix_clk_hz = "169600000";
-
-				*	gain_factor = "16";
-				*	framerate_factor = "1000000";
-				*	exposure_factor = "1000000";
-				*	min_gain_val = "16"; // 1.00x
-				*	max_gain_val = "170"; // 10.66x
-				*	step_gain_val = "1";
-				*	default_gain = "16"; // 1.00x
-				*	min_hdr_ratio = "1";
-				*	max_hdr_ratio = "1";
-				*	min_framerate = "2000000"; // 2.0 fps
-				*	max_framerate = "120000000"; // 120.0 fps
-				*	step_framerate = "1";
-				*	default_framerate = "120000000"; // 120.0 fps
-				*	min_exp_time = "13"; // us
-				*	max_exp_time = "683709"; // us
-				*	step_exp_time = "1";
-				*	default_exp_time = "2495"; // us
-
-				*	embedded_metadata_height = "2";
-				*};
-				*/
+			};
+		};
+	};
 
-				ports {
-					#address-cells = <1>;
-					#size-cells = <0>;
-					port@0 {
-						reg = <0>;
-						rbpcv2_imx219_out1: endpoint {
-							status = "okay";
-							port-index = <2>;
-							bus-width = <2>;
-							remote-endpoint = <&rbpcv2_imx219_csi_in1>;
-						};
+
+	i2c@c250000 {
+		status="okay";
+		imx219_cam3: rbpcv2_imx219_d@10 {
+			status="okay";
+			compatible = "nvidia,imx219";
+			reg = <0x10>;
+
+			devnode = "video3";
+
+			physical_w = "3.680";
+			physical_h = "2.760";
+
+			sensor_model = "imx219";
+
+			use_sensor_mode_id = "true";
+
+			mode0 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_d";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "2464";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "21000000";
+				step_framerate = "1";
+				default_framerate = "21000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode1 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_d";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "3264";
+				active_h = "1848";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "28000000";
+				step_framerate = "1";
+				default_framerate = "28000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode2 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_d";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1920";
+				active_h = "1080";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "30000000";
+				step_framerate = "1";
+				default_framerate = "30000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode3 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_d";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "182400000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "60000000";
+				step_framerate = "1";
+				default_framerate = "60000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+			mode4 {
+				mclk_khz = "24000";
+				num_lanes = "2";
+				tegra_sinterface = "serial_d";
+				phy_mode = "DPHY";
+				discontinuous_clk = "yes";
+				dpcm_enable = "false";
+				cil_settletime = "0";
+
+				active_w = "1280";
+				active_h = "720";
+				pixel_t = "bayer_rggb";
+				readout_orientation = "90";
+				line_length = "3448";
+				inherent_gain = "1";
+				mclk_multiplier = "9.33";
+				pix_clk_hz = "169600000";
+
+				gain_factor = "16";
+				framerate_factor = "1000000";
+				exposure_factor = "1000000";
+				min_gain_val = "16";
+				max_gain_val = "170";
+				step_gain_val = "1";
+				default_gain = "16";
+				min_hdr_ratio = "1";
+				max_hdr_ratio = "1";
+				min_framerate = "2000000";
+				max_framerate = "120000000";
+				step_framerate = "1";
+				default_framerate = "120000000";
+				min_exp_time = "13";
+				max_exp_time = "683709";
+				step_exp_time = "1";
+				default_exp_time = "2495";
+
+				embedded_metadata_height = "2";
+			};
+
+			ports {
+				status="okay";
+				#address-cells = <1>;
+				#size-cells = <0>;
+				port@0 {
+					status="okay";
+					reg = <0>;
+					rbpcv2_imx219_out3: endpoint {
+						status="okay";
+						port-index = <3>;
+						bus-width = <2>;
+						remote-endpoint = <&rbpcv2_imx219_csi_in3>;
 					};
 				};
 			};
@@ -794,34 +1102,8 @@
 / {
 	tcp: tegra-camera-platform {
 		compatible = "nvidia, tegra-camera-platform";
-		/**
-		* Physical settings to calculate max ISO BW
-		*
-		* num_csi_lanes = <>;
-		* Total number of CSI lanes when all cameras are active
-		*
-		* max_lane_speed = <>;
-		* Max lane speed in Kbit/s
-		*
-		* min_bits_per_pixel = <>;
-		* Min bits per pixel
-		*
-		* vi_peak_byte_per_pixel = <>;
-		* Max byte per pixel for the VI ISO case
-		*
-		* vi_bw_margin_pct = <>;
-		* Vi bandwidth margin in percentage
-		*
-		* max_pixel_rate = <>;
-		* Max pixel rate in Kpixel/s for the ISP ISO case
-		*
-		* isp_peak_byte_per_pixel = <>;
-		* Max byte per pixel for the ISP ISO case
-		*
-		* isp_bw_margin_pct = <>;
-		* Isp bandwidth margin in percentage
-		*/
-		num_csi_lanes = <4>;
+
+		num_csi_lanes = <8>;
 		max_lane_speed = <1500000>;
 		min_bits_per_pixel = <10>;
 		vi_peak_byte_per_pixel = <2>;
@@ -830,39 +1112,72 @@
 		isp_peak_byte_per_pixel = <5>;
 		isp_bw_margin_pct = <25>;
 
-		/**
-		 * The general guideline for naming badge_info contains 3 parts, and is as follows,
-		 * The first part is the camera_board_id for the module; if the module is in a FFD
-		 * platform, then use the platform name for this part.
-		 * The second part contains the position of the module, ex. "rear" or "front".
-		 * The third part contains the last 6 characters of a part number which is found
-		 * in the module's specsheet from the vendor.
-		 */
 		modules {
+			status="okay";
 			cam_module0: module0 {
-				badge = "jakku_front_RBP194";
-				position = "front";
+				status="okay";
+				badge = "jakku_topleft_RBP194";
+				position = "topleft";
 				orientation = "1";
 				cam_module0_drivernode0: drivernode0 {
+					status="okay";
 					pcl_id = "v4l2_sensor";
-					devname = "imx219 9-0010";
-					proc-device-tree = "/proc/device-tree/cam_i2cmux/i2c@0/rbpcv2_imx219_a@10";
+					devname = "imx219 2-0010";
+					proc-device-tree = "/proc/device-tree/i2c@3180000/rbpcv2_imx219_a@10";
 				};
 				cam_module0_drivernode1: drivernode1 {
+					status="okay";
 					pcl_id = "v4l2_lens";
 					proc-device-tree = "/proc/device-tree/lens_imx219@RBPCV2/";
 				};
 			};
 			cam_module1: module1 {
-				badge = "jakku_rear_RBP194";
-				position = "rear";
+				status="okay";
+				badge = "jakku_topright_RBP194";
+				position = "topright";
 				orientation = "1";
 				cam_module1_drivernode0: drivernode0 {
+					status="okay";
 					pcl_id = "v4l2_sensor";
-					devname = "imx219 10-0010";
-					proc-device-tree = "/proc/device-tree/cam_i2cmux/i2c@1/rbpcv2_imx219_c@10";
+					devname = "imx219 1-0010";
+					proc-device-tree = "/proc/device-tree/i2c@c240000/rbpcv2_imx219_e@10";
 				};
 				cam_module1_drivernode1: drivernode1 {
+					status="okay";
+					pcl_id = "v4l2_lens";
+					proc-device-tree = "/proc/device-tree/lens_imx219@RBPCV2/";
+				};
+			};
+			cam_module2: module2 {
+				status="okay";
+				badge = "jakku_bottomleft_RBP194";
+				position = "bottomleft";
+				orientation = "1";
+				cam_module2_drivernode0: drivernode0 {
+					status="okay";
+					pcl_id = "v4l2_sensor";
+					devname = "imx219 8-0010";
+					proc-device-tree = "/proc/device-tree/i2c@31e0000/rbpcv2_imx219_c@10";
+				};
+				cam_module2_drivernode1: drivernode1 {
+					status="okay";
+					pcl_id = "v4l2_lens";
+					proc-device-tree = "/proc/device-tree/lens_imx219@RBPCV2/";
+				};
+			};
+			cam_module3: module3 {
+				status="okay";
+				badge = "jakku_bottomright_RBP194";
+				position = "bottomright";
+				orientation = "1";
+				cam_module3_drivernode0: drivernode0 {
+					status="okay";
+					pcl_id = "v4l2_sensor";
+					devname = "imx219 7-0010";
+					proc-device-tree = "/proc/device-tree/i2c@c250000/rbpcv2_imx219_d@10";
+				};
+				cam_module3_drivernode1: drivernode1 {
+					status="okay";
 					pcl_id = "v4l2_lens";
 					proc-device-tree = "/proc/device-tree/lens_imx219@RBPCV2/";
 				};
-- 
2.25.1

